{% extends "base.html" %}
{% block title %}Admin - Proctoring{% endblock %}
{% block content %}
<h2>Set Exam Questions</h2>
<form method="post">
    <input type="text" name="question" placeholder="Question" required>
    <input type="text" name="option1" placeholder="Option 1" required>
    <input type="text" name="option2" placeholder="Option 2" required>
    <input type="text" name="option3" placeholder="Option 3" required>
    <input type="text" name="option4" placeholder="Option 4" required>
    <input type="text" name="answer" placeholder="Correct Answer" required>
    <button type="submit">Add Question</button>
</form>
<hr>
<h3>Exam Settings</h3>
<form method="post" action="/set_exam_duration">
    <label for="duration">Exam Duration (minutes):</label>
    <input type="number" name="duration" id="duration" min="1" value="{{ duration }}" required>
    <button type="submit">Set Duration</button>
</form>
<hr>
<h3>Integrity Thresholds</h3>
<form method="post" action="/set_thresholds">
    <table>
        <thead>
            <tr><th>Alert Type</th><th>Threshold (violations before alert)</th></tr>
        </thead>
        <tbody>
            <tr><td>Face Mismatch</td><td><input type="number" name="face_mismatch" min="1" value="{{ thresholds.face_mismatch }}" required></td></tr>
            <tr><td>Multiple Faces</td><td><input type="number" name="multiple_faces" min="1" value="{{ thresholds.multiple_faces }}" required></td></tr>
            <tr><td>Looking Away</td><td><input type="number" name="looking_away" min="1" value="{{ thresholds.looking_away }}" required></td></tr>
            <tr><td>Audio</td><td><input type="number" name="audio" min="1" value="{{ thresholds.audio }}" required></td></tr>
            <tr><td>Screen Activity</td><td><input type="number" name="screen_activity" min="1" value="{{ thresholds.screen_activity }}" required></td></tr>
        </tbody>
    </table>
    <button type="submit">Update Thresholds</button>
</form>
<hr>
<h3>Current Questions</h3>
<table>
    <thead>
        <tr><th>Question</th><th>Options</th></tr>
    </thead>
    <tbody>
    {% for q in questions %}
        <tr>
            <td>{{ q.question }}</td>
            <td>{{ q.options }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
<hr>
<h3>Student Results</h3>
<table>
    <thead>
        <tr><th>Student</th><th>Score</th><th>Total</th><th>Time</th></tr>
    </thead>
    <tbody>
    {% for r in results %}
        <tr>
            <td>{{ r.username }}</td>
            <td>{{ r.score }}</td>
            <td>{{ r.total }}</td>
            <td>{{ r.timestamp }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}