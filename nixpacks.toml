[phases.setup]
nixPkgs = [
  "python310",
  "gnumake",
  "gcc",
  "gpp",               # g++
  "libGL",             # Required by OpenCV
  "mesa",              # libGL.so.1 provider
  "libGLU",            # Optional but sometimes needed
  "xorg.libX11",       # X11 libraries OpenCV needs
  "cmake",             # Optional but may be needed for insightface
  "pkg-config"         # Helps build native modules
]

[phases.install]
cmds = [
  "python -m venv --copies /opt/venv",
  ". /opt/venv/bin/activate && pip install -r requirements.txt"
]

[phases.start]
cmd = "python app.py"
